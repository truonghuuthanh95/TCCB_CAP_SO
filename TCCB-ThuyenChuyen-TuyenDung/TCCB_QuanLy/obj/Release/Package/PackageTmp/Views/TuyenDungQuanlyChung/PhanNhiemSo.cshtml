
@{
    ViewBag.Title = "PhanNhiemSo";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="panel panel-default">
    <div class="panel-heading">
        Danh sách nhận nhiệm sở
    </div>
    <div class="panel-body">
        <table class="table table-hover table-responsive" id="danhsachphanhiemso">
            <thead>
                <tr>
                    <th>STT</th>
                    <th>Mã vòng 2</th>
                    <th>Ho và tên</th>
                    <th>Vị trí đăng ký</th>
                    <th>Giới tính</th>
                    <th>Ngày sinh</th>
                    <th>CMND</th>
                    <th>Trường</th>
                    <th>Trang thái</th>
                </tr>
            </thead>
            <tbody>
                @{

                    int index = 1;
                    foreach (var item in ViewBag.CandidatesSchool)
                    {
                        <tr>
                            <td>@index</td>
                            <td>@item.MaVong2</td>
                            <td>@item.RegistrationInterview.LastName @item.RegistrationInterview.FirstName</td>

                            <td>@item.RegistrationInterview.MonDuTuyen.ViTriUngTuyen.Name @item.RegistrationInterview.MonDuTuyen.Name</td>
                            @{
                                if (item.RegistrationInterview.IsMale)
                                {
                                    <td>Nam</td>
                                }
                                else
                                {
                                    <td>Nữ</td>
                                }
                            }

                            <td>@item.RegistrationInterview.DOB.ToString("dd/MM/yyyy")</td>

                            <td>@item.RegistrationInterview.IdentifyCard</td>
                            <td>@item.AccountSchool.SchoolName</td>
                            @{
                                if (item.StatusTiepNhanId != null)
                                {
                                    <td>@item.StatusTiepNhan.Name</td>
                                }
                                else
                                {
                                    <td style="color: red;">Chưa cập nhật</td>
                                }
                            }


                        </tr>
                        index++;
                    }
                }


            </tbody>
        </table>
    </div>
</div>
<script>
    $(document).ready(function () {
        $('#danhsachphanhiemso').DataTable({
            initComplete: function () {
                this.api().columns().every(function () {
                    var column = this;
                    var select = $('<select><option value=""></option></select>')
                        .appendTo($(column.footer()).empty())
                        .on('change', function () {
                            var val = $.fn.dataTable.util.escapeRegex(
                                $(this).val()
                            );

                            column
                                .search(val ? '^' + val + '$' : '', true, false)
                                .draw();
                        });

                    column.data().unique().sort().each(function (d, j) {
                        select.append('<option value="' + d + '">' + d + '</option>')
                    });
                });
            }
        });
    });
</script>